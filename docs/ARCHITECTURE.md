# Novo Retry Intelligence - Architecture & Technology Stack

**Version:** 1.1.0
**Last Updated:** January 2025
**Status:** Production

---

## Table of Contents
1. [System Architecture](#system-architecture)
2. [Technology Stack](#technology-stack)
3. [Component Breakdown](#component-breakdown)
4. [Data Flow](#data-flow)
5. [Deployment Architecture](#deployment-architecture)

---

## System Architecture

### High-Level Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   USER                                       â”‚
â”‚                            (Merchant/Developer)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTPS
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VERCEL EDGE NETWORK                                 â”‚
â”‚                        (CDN + Load Balancing)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                   â”‚
                 â”‚                                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   FRONTEND (React SPA)   â”‚      â”‚   BACKEND (Express API)   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  Payment Simulator  â”‚ â”‚      â”‚  â”‚  Retry Controller    â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚ Retry Intelligence  â”‚ â”‚â—„â”€â”€â”€â”€â”€â”¤  â”‚  Failure Analyzer    â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  Payment History    â”‚ â”‚      â”‚  â”‚  Retry Strategy      â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  Payment Context    â”‚ â”‚      â”‚  â”‚  Rate Limiter        â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚                           â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚   Vite + TypeScript       â”‚      â”‚  â”‚  ML Predictor        â”‚â”‚
    â”‚   TailwindCSS             â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚   React Router            â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚   Lucide Icons            â”‚      â”‚  â”‚  Cost Calculator     â”‚â”‚
    â”‚                           â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚   Port: 4000 (dev)        â”‚      â”‚                          â”‚
    â”‚   Build: dist/            â”‚      â”‚   Node.js + Express      â”‚
    â”‚                           â”‚      â”‚   Joi Validation         â”‚
    â”‚                           â”‚      â”‚   Helmet.js Security     â”‚
    â”‚                           â”‚      â”‚                          â”‚
    â”‚                           â”‚      â”‚   Port: 4000             â”‚
    â”‚                           â”‚      â”‚   Serverless Functions   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                  â”‚
                â”‚                                  â”‚
                â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚         â”‚
                â”‚         â”‚ SQL Queries
                â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SUPABASE POSTGRESQL                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         transactions table                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   id     â”‚ transaction_id  â”‚ amount  â”‚  status  â”‚ failure_typeâ”‚   â”‚ â”‚
â”‚  â”‚  â”‚  (UUID)  â”‚   (VARCHAR)     â”‚(NUMERIC)â”‚(VARCHAR) â”‚  (VARCHAR)  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Indexes: transaction_id, status, created_at                          â”‚ â”‚
â”‚  â”‚  Row-Level Security: Enabled                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Database: PostgreSQL 15                                                     â”‚
â”‚  Region: US East (configurable)                                              â”‚
â”‚  Backup: Daily automatic backups                                             â”‚
â”‚  Connection: SSL/TLS encrypted                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

### Complete Tech Stack Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND STACK                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ğŸ¨ UI Framework                                                     â”‚
â”‚    â”œâ”€ React 18.3.1          (Component-based UI)                    â”‚
â”‚    â”œâ”€ TypeScript 5.6.2      (Type safety)                           â”‚
â”‚    â””â”€ Vite 6.0.1            (Build tool & dev server)               â”‚
â”‚                                                                      â”‚
â”‚  ğŸ’… Styling                                                          â”‚
â”‚    â”œâ”€ TailwindCSS 3.4.17    (Utility-first CSS)                     â”‚
â”‚    â”œâ”€ PostCSS               (CSS processing)                        â”‚
â”‚    â””â”€ Autoprefixer          (Browser compatibility)                 â”‚
â”‚                                                                      â”‚
â”‚  ğŸ¯ State Management                                                 â”‚
â”‚    â”œâ”€ React Context API     (Global state)                          â”‚
â”‚    â”œâ”€ React Hooks           (Local state)                           â”‚
â”‚    â””â”€ Custom Hooks          (Reusable logic)                        â”‚
â”‚                                                                      â”‚
â”‚  ğŸ”Œ HTTP Client                                                      â”‚
â”‚    â”œâ”€ Axios 1.7.9           (API requests)                          â”‚
â”‚    â””â”€ Supabase JS 2.49.2    (Database client)                       â”‚
â”‚                                                                      â”‚
â”‚  ğŸ­ Icons & Assets                                                   â”‚
â”‚    â””â”€ Lucide React 0.469.0  (Icon library)                          â”‚
â”‚                                                                      â”‚
â”‚  ğŸ§ª Development Tools                                                â”‚
â”‚    â”œâ”€ ESLint               (Code linting)                           â”‚
â”‚    â”œâ”€ TypeScript ESLint    (TS-specific linting)                    â”‚
â”‚    â””â”€ Vite Plugin React    (Fast Refresh)                           â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND STACK                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  âš™ï¸  Runtime & Framework                                             â”‚
â”‚    â”œâ”€ Node.js 18+           (JavaScript runtime)                    â”‚
â”‚    â”œâ”€ Express.js 4.21.2     (Web framework)                         â”‚
â”‚    â””â”€ CommonJS              (Module system)                         â”‚
â”‚                                                                      â”‚
â”‚  âœ… Validation & Security                                            â”‚
â”‚    â”œâ”€ Joi 17.13.3           (Schema validation)                     â”‚
â”‚    â”œâ”€ Helmet.js 8.0.0       (Security headers)                      â”‚
â”‚    â”œâ”€ CORS 2.8.5            (Cross-origin requests)                 â”‚
â”‚    â””â”€ Express Rate Limit    (Rate limiting)                         â”‚
â”‚                                                                      â”‚
â”‚  ğŸ—„ï¸  Database Client                                                 â”‚
â”‚    â”œâ”€ @supabase/supabase-js (Supabase SDK)                          â”‚
â”‚    â””â”€ PostgreSQL Client     (Database driver)                       â”‚
â”‚                                                                      â”‚
â”‚  ğŸ§® Business Logic                                                   â”‚
â”‚    â”œâ”€ Failure Analyzer      (Classification engine)                 â”‚
â”‚    â”œâ”€ Retry Strategy        (Scheduling logic)                      â”‚
â”‚    â”œâ”€ Rate Limiter          (Compliance checker)                    â”‚
â”‚    â”œâ”€ ML Predictor          (Success probability)                   â”‚
â”‚    â””â”€ Cost Calculator       (ROI computation)                       â”‚
â”‚                                                                      â”‚
â”‚  ğŸ§ª Testing                                                          â”‚
â”‚    â”œâ”€ Jest 29.7.0           (Testing framework)                     â”‚
â”‚    â”œâ”€ Supertest 7.0.0       (API testing)                           â”‚
â”‚    â””â”€ Coverage: 85%+        (Test coverage)                         â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“ Configuration                                                    â”‚
â”‚    â”œâ”€ dotenv                (Environment variables)                 â”‚
â”‚    â””â”€ Config files          (failure-rules.js)                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE & INFRASTRUCTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ğŸ—„ï¸  Database                                                         â”‚
â”‚    â”œâ”€ PostgreSQL 15         (Relational database)                   â”‚
â”‚    â”œâ”€ Supabase Platform     (Managed hosting)                       â”‚
â”‚    â”œâ”€ Row-Level Security    (Access control)                        â”‚
â”‚    â””â”€ Auto-generated UUIDs  (Primary keys)                          â”‚
â”‚                                                                      â”‚
â”‚  â˜ï¸  Hosting & Deployment                                            â”‚
â”‚    â”œâ”€ Vercel Edge Network   (CDN & serverless)                      â”‚
â”‚    â”œâ”€ Serverless Functions  (Backend API)                           â”‚
â”‚    â”œâ”€ Static Site Hosting   (React SPA)                             â”‚
â”‚    â””â”€ Automatic Deployments (Git integration)                       â”‚
â”‚                                                                      â”‚
â”‚  ğŸ” Security                                                         â”‚
â”‚    â”œâ”€ HTTPS/TLS             (Encrypted connections)                 â”‚
â”‚    â”œâ”€ Environment Variables (Secrets management)                    â”‚
â”‚    â”œâ”€ PCI-DSS Compliance    (No card data storage)                  â”‚
â”‚    â””â”€ Security Headers      (Helmet.js)                             â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“Š Monitoring (Planned)                                             â”‚
â”‚    â”œâ”€ Vercel Analytics      (Performance metrics)                   â”‚
â”‚    â”œâ”€ Supabase Dashboard    (Database monitoring)                   â”‚
â”‚    â””â”€ Application Logs      (Error tracking)                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Breakdown

### Frontend Components Architecture

```
client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ PaymentSimulator.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ Form inputs (customer, amount, processor)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ² Payment simulation logic
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“Š Real-time metrics display
â”‚   â”‚   â”‚   â””â”€â”€ â¡ï¸  Analyze button â†’ Retry Intelligence
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ RetryIntelligence.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‹ Transaction details form
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ§  API call to /analyze-failure
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ˆ Analysis results display
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Success probability gauge
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Cost analysis cards
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Retry schedule timeline
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Compliance checks
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ML prediction details
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ”„ Retry payment button
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ PaymentHistory.tsx
â”‚   â”‚       â”œâ”€â”€ ğŸ“œ Transaction list (Supabase query)
â”‚   â”‚       â”œâ”€â”€ ğŸ” Filter by status/processor
â”‚   â”‚       â”œâ”€â”€ ğŸ“Š Success rate metrics
â”‚   â”‚       â””â”€â”€ ğŸ—‘ï¸  Clear history action
â”‚   â”‚
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ PaymentContext.tsx
â”‚   â”‚       â”œâ”€â”€ ğŸŒ Global state management
â”‚   â”‚       â”œâ”€â”€ ğŸ’¾ Supabase CRUD operations
â”‚   â”‚       â”‚   â”œâ”€â”€ loadPayments()
â”‚   â”‚       â”‚   â”œâ”€â”€ addPayment()
â”‚   â”‚       â”‚   â”œâ”€â”€ updatePayment()
â”‚   â”‚       â”‚   â””â”€â”€ clearHistory()
â”‚   â”‚       â””â”€â”€ ğŸ“Š getMetrics() calculation
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ analyzeFailure() â†’ POST /api/v1/analyze-failure
â”‚   â”‚   â”‚   â””â”€â”€ checkHealth() â†’ GET /api/v1/health
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”‚   â”‚   â””â”€â”€ Supabase client initialization
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ paymentSimulator.ts
â”‚   â”‚   â”‚   â””â”€â”€ simulatePayment() logic
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ timeUtils.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ getRelativeTime()
â”‚   â”‚   â”‚   â”œâ”€â”€ formatTimeRemaining()
â”‚   â”‚   â”‚   â””â”€â”€ formatInterval()
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ examples.ts
â”‚   â”‚       â””â”€â”€ Pre-configured test scenarios
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ api.types.ts        (Backend API interfaces)
â”‚   â”‚   â””â”€â”€ simulator.types.ts  (Frontend types)
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ¨ Layout & navigation
â”‚   â”‚   â”œâ”€â”€ ğŸŒ“ Dark mode toggle
â”‚   â”‚   â””â”€â”€ ğŸ“± Tab routing
â”‚   â”‚
â”‚   â””â”€â”€ main.tsx
â”‚       â””â”€â”€ React root + PaymentProvider wrapper
```

### Backend Services Architecture

```
src/
â”œâ”€â”€ index.js                     (Express app entry point)
â”‚   â”œâ”€â”€ Middleware setup
â”‚   â”‚   â”œâ”€â”€ CORS
â”‚   â”‚   â”œâ”€â”€ Helmet.js (security)
â”‚   â”‚   â”œâ”€â”€ Express JSON parser
â”‚   â”‚   â””â”€â”€ Rate limiting
â”‚   â””â”€â”€ Route mounting
â”‚
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ retry-routes.js
â”‚       â”œâ”€â”€ POST /api/v1/analyze-failure â†’ analyzeFailure()
â”‚       â””â”€â”€ GET  /api/v1/health          â†’ healthCheck()
â”‚
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ retry-controller.js
â”‚       â””â”€â”€ analyzeFailure()
â”‚           â”œâ”€â”€ 1. Validate input (Joi)
â”‚           â”œâ”€â”€ 2. Analyze failure type
â”‚           â”œâ”€â”€ 3. Check rate limits
â”‚           â”œâ”€â”€ 4. Calculate ML prediction
â”‚           â”œâ”€â”€ 5. Generate retry strategy
â”‚           â”œâ”€â”€ 6. Calculate costs/ROI
â”‚           â”œâ”€â”€ 7. Build response
â”‚           â””â”€â”€ 8. Return JSON
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ failure-analyzer.js
â”‚   â”‚   â””â”€â”€ analyzeFailure()
â”‚   â”‚       â”œâ”€â”€ Input: failureType, attemptNumber, etc.
â”‚   â”‚       â”œâ”€â”€ Logic: Match against FAILURE_RULES
â”‚   â”‚       â””â”€â”€ Output: shouldRetry, category, reasoning
â”‚   â”‚
â”‚   â”œâ”€â”€ retry-strategy.js
â”‚   â”‚   â””â”€â”€ generateRetryStrategy()
â”‚   â”‚       â”œâ”€â”€ Input: failureType, merchantConfig
â”‚   â”‚       â”œâ”€â”€ Logic:
â”‚   â”‚       â”‚   â”œâ”€â”€ Immediate: [0s, 60s, 300s]
â”‚   â”‚       â”‚   â”œâ”€â”€ Delayed: [1h, 12h, 24h]
â”‚   â”‚       â”‚   â””â”€â”€ Limited: [5min, 1h]
â”‚   â”‚       â””â”€â”€ Output: retrySchedule with ISO timestamps
â”‚   â”‚
â”‚   â”œâ”€â”€ rate-limiter.js
â”‚   â”‚   â””â”€â”€ checkRateLimit()
â”‚   â”‚       â”œâ”€â”€ Input: processor, cardLastFour, attemptNumber
â”‚   â”‚       â”œâ”€â”€ Logic: In-memory tracking
â”‚   â”‚       â”‚   â”œâ”€â”€ Stripe: 5 attempts / 24 hours
â”‚   â”‚       â”‚   â”œâ”€â”€ PSE:    3 attempts / 12 hours
â”‚   â”‚       â”‚   â””â”€â”€ Nequi:  4 attempts / 24 hours
â”‚   â”‚       â””â”€â”€ Output: withinLimit, remaining, resetAt
â”‚   â”‚
â”‚   â”œâ”€â”€ ml-predictor.js
â”‚   â”‚   â””â”€â”€ predictSuccessProbability()
â”‚   â”‚       â”œâ”€â”€ Input: Base probability, transaction context
â”‚   â”‚       â”œâ”€â”€ Factors:
â”‚   â”‚       â”‚   â”œâ”€â”€ Time of day (business hours = 1.2x)
â”‚   â”‚       â”‚   â”œâ”€â”€ Day of week (weekday = 1.1x)
â”‚   â”‚       â”‚   â”œâ”€â”€ Amount (small = 1.3x boost)
â”‚   â”‚       â”‚   â”œâ”€â”€ Merchant category (simulated)
â”‚   â”‚       â”‚   â””â”€â”€ Historical patterns (card-based)
â”‚   â”‚       â”œâ”€â”€ Formula: adjustedProb = baseProb Ã— factors
â”‚   â”‚       â””â”€â”€ Output: probability, confidence, details
â”‚   â”‚
â”‚   â””â”€â”€ database.service.js
â”‚       â”œâ”€â”€ saveTransaction()
â”‚       â”œâ”€â”€ getTransactions()
â”‚       â”œâ”€â”€ updateTransaction()
â”‚       â””â”€â”€ deleteAllTransactions()
â”‚           â””â”€â”€ Supabase PostgreSQL operations
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ cost-calculator.js
â”‚   â”‚   â””â”€â”€ calculateROI()
â”‚   â”‚       â”œâ”€â”€ Expected Revenue = Amount Ã— Success Probability
â”‚   â”‚       â”œâ”€â”€ Total Cost = Retry Fee Ã— Max Retries
â”‚   â”‚       â”œâ”€â”€ ROI = (Revenue - Cost) / Cost Ã— 100%
â”‚   â”‚       â””â”€â”€ worthRetrying = ROI > 0
â”‚   â”‚
â”‚   â””â”€â”€ validators.js
â”‚       â””â”€â”€ Joi schemas
â”‚           â”œâ”€â”€ transactionSchema
â”‚           â”‚   â”œâ”€â”€ transactionId: required string
â”‚           â”‚   â”œâ”€â”€ merchantId: required string
â”‚           â”‚   â”œâ”€â”€ amount: positive number
â”‚           â”‚   â”œâ”€â”€ failureType: enum (6 types)
â”‚           â”‚   â””â”€â”€ paymentProcessor: enum (stripe|pse|nequi)
â”‚           â””â”€â”€ merchantConfigSchema
â”‚
â””â”€â”€ config/
    â””â”€â”€ failure-rules.js
        â”œâ”€â”€ FAILURE_RULES object
        â”‚   â”œâ”€â”€ insufficient_funds
        â”‚   â”œâ”€â”€ card_declined
        â”‚   â”œâ”€â”€ network_timeout
        â”‚   â”œâ”€â”€ processor_downtime
        â”‚   â”œâ”€â”€ invalid_card_details
        â”‚   â””â”€â”€ card_stolen
        â””â”€â”€ RATE_LIMITS object
            â”œâ”€â”€ stripe: { maxRetries: 5, window: 86400 }
            â”œâ”€â”€ pse: { maxRetries: 3, window: 43200 }
            â””â”€â”€ nequi: { maxRetries: 4, window: 86400 }
```

---

## Data Flow

### Complete Request Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PAYMENT FAILURE ANALYSIS FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£  USER INITIATES PAYMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PaymentSimulatorâ”‚
â”‚   Component     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1. User fills form
         â”‚    - Customer: "John Doe"
         â”‚    - Amount: 50000 COP
         â”‚    - Processor: "stripe"
         â”‚    - Simulate outcome: "random"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ simulatePayment()       â”‚
â”‚  - Random success/fail  â”‚
â”‚  - Assign failure type  â”‚
â”‚  - Generate txn ID      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Payment simulated
         â”‚    Result: FAILED
         â”‚    Failure: "insufficient_funds"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PaymentContext.addPayment() â”‚
â”‚  - Save to local state       â”‚
â”‚  - Insert to Supabase        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3. Payment stored
         â”‚    Status: "failed"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navigate to             â”‚
â”‚ Retry Intelligence tab  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4. Auto-fill form with
         â”‚    failed payment data
         â”‚
         â–¼

2ï¸âƒ£  USER ANALYZES FAILURE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RetryIntelligence       â”‚
â”‚   Component             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 5. User clicks "Analyze Payment Failure"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ analyzeFailure() API call        â”‚
â”‚  POST /api/v1/analyze-failure    â”‚
â”‚                                  â”‚
â”‚  Request Body:                   â”‚
â”‚  {                               â”‚
â”‚    transactionId: "txn_123",     â”‚
â”‚    merchantId: "mch_456",        â”‚
â”‚    amount: 50000,                â”‚
â”‚    currency: "COP",              â”‚
â”‚    failureType: "insufficient_   â”‚
â”‚                  funds",         â”‚
â”‚    processor: "stripe",          â”‚
â”‚    attemptNumber: 1,             â”‚
â”‚    timestamp: "2025-01-05..."    â”‚
â”‚  }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 6. HTTP request to Vercel
         â”‚
         â–¼

3ï¸âƒ£  BACKEND PROCESSING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Express.js API (Vercel Serverless) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Joi Validation       â”‚
â”‚    - Schema check       â”‚
â”‚    - Type validation    â”‚
â”‚    - Required fields    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ âœ… Valid
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Failure Analyzer                  â”‚
â”‚    analyzeFailure()                  â”‚
â”‚                                      â”‚
â”‚    Match: "insufficient_funds"       â”‚
â”‚    â†’ FAILURE_RULES lookup            â”‚
â”‚                                      â”‚
â”‚    Result:                           â”‚
â”‚    â”œâ”€ shouldRetry: true              â”‚
â”‚    â”œâ”€ retryStrategy: "delayed"       â”‚
â”‚    â”œâ”€ maxRetries: 3                  â”‚
â”‚    â”œâ”€ successProbability: 0.20       â”‚
â”‚    â””â”€ category: "retryable_with_     â”‚
â”‚                   delay"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Rate Limiter                      â”‚
â”‚    checkRateLimit()                  â”‚
â”‚                                      â”‚
â”‚    Processor: "stripe"               â”‚
â”‚    Limit: 5 attempts / 24h           â”‚
â”‚    Current: 1 attempt                â”‚
â”‚                                      â”‚
â”‚    Result:                           â”‚
â”‚    â”œâ”€ withinRateLimit: true          â”‚
â”‚    â”œâ”€ remaining: 4                   â”‚
â”‚    â””â”€ resetAt: "2025-01-06T12:00"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ML Predictor                      â”‚
â”‚    predictSuccessProbability()       â”‚
â”‚                                      â”‚
â”‚    Base probability: 0.20 (20%)      â”‚
â”‚                                      â”‚
â”‚    Factors:                          â”‚
â”‚    â”œâ”€ Time: 2 PM (business hrs) 1.2x â”‚
â”‚    â”œâ”€ Day: Wednesday (weekday)  1.1x â”‚
â”‚    â”œâ”€ Amount: 50K (medium)      1.0x â”‚
â”‚    â”œâ”€ Category: E-commerce      1.1x â”‚
â”‚    â””â”€ History: Card *4242       1.0x â”‚
â”‚                                      â”‚
â”‚    Adjusted: 0.20 Ã— 1.452 = 0.29     â”‚
â”‚    Capped at: 0.29 (29%)             â”‚
â”‚    Confidence: 0.75 (75%)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Retry Strategy Generator          â”‚
â”‚    generateRetryStrategy()           â”‚
â”‚                                      â”‚
â”‚    Strategy: "delayed"               â”‚
â”‚    Intervals: [3600, 43200, 86400]   â”‚
â”‚                (1h, 12h, 24h)        â”‚
â”‚                                      â”‚
â”‚    Schedule:                         â”‚
â”‚    â”œâ”€ Attempt 1: 2025-01-05 13:00    â”‚
â”‚    â”œâ”€ Attempt 2: 2025-01-06 01:00    â”‚
â”‚    â””â”€ Attempt 3: 2025-01-06 13:00    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Cost Calculator                   â”‚
â”‚    calculateROI()                    â”‚
â”‚                                      â”‚
â”‚    Amount: 50,000 COP                â”‚
â”‚    Success Probability: 0.29         â”‚
â”‚    Expected Revenue: 14,500 COP      â”‚
â”‚                                      â”‚
â”‚    Retry Fee: 0 COP (Stripe free)    â”‚
â”‚    Max Retries: 3                    â”‚
â”‚    Total Cost: 0 COP                 â”‚
â”‚                                      â”‚
â”‚    ROI: âˆ% (cost = 0)                â”‚
â”‚    Worth Retrying: âœ… YES             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Response Builder                  â”‚
â”‚                                      â”‚
â”‚    Combine all results into JSON     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 8. HTTP Response (200 OK)
         â”‚
         â–¼

4ï¸âƒ£  RESPONSE TO FRONTEND
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response JSON                        â”‚
â”‚ {                                    â”‚
â”‚   shouldRetry: true,                 â”‚
â”‚   transactionId: "txn_123",          â”‚
â”‚   estimatedSuccessProbability: 0.29, â”‚
â”‚   retryRecommendation: {             â”‚
â”‚     nextRetryAt: "2025-01-05T13:00", â”‚
â”‚     retryIntervalSeconds: 3600,      â”‚
â”‚     maxRetries: 3,                   â”‚
â”‚     remainingRetries: 3,             â”‚
â”‚     retrySchedule: [...],            â”‚
â”‚     mlEnhanced: true                 â”‚
â”‚   },                                 â”‚
â”‚   reasoning: {                       â”‚
â”‚     failureCategory: "retryable_     â”‚
â”‚                       with_delay",   â”‚
â”‚     confidence: 0.75,                â”‚
â”‚     factors: ["Business hours", ...] â”‚
â”‚   },                                 â”‚
â”‚   costAnalysis: {                    â”‚
â”‚     roi: Infinity,                   â”‚
â”‚     worthRetrying: true,             â”‚
â”‚     expectedRevenue: 14500,          â”‚
â”‚     totalRetryCost: 0,               â”‚
â”‚     potentialRevenue: 50000          â”‚
â”‚   },                                 â”‚
â”‚   complianceChecks: {                â”‚
â”‚     withinRateLimit: true,           â”‚
â”‚     rateLimitRemaining: 4,           â”‚
â”‚     pciCompliant: true               â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RetryIntelligence Component          â”‚
â”‚  - Display results                   â”‚
â”‚  - Show success probability gauge    â”‚
â”‚  - Display cost analysis cards       â”‚
â”‚  - Show retry schedule timeline      â”‚
â”‚  - Enable "Retry Payment Now" button â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 9. User clicks "Retry Payment Now"
         â”‚
         â–¼

5ï¸âƒ£  RETRY EXECUTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleRetryPayment()                 â”‚
â”‚  - Simulate retry attempt            â”‚
â”‚  - Update payment status             â”‚
â”‚  - Save to Supabase                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 10. Retry result
         â”‚     Success: "retry_success" âœ…
         â”‚     OR
         â”‚     Failed: "retry_failed" âŒ
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PaymentContext.updatePayment()       â”‚
â”‚  - Update local state                â”‚
â”‚  - Update Supabase record            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Updates                           â”‚
â”‚  - Show success/failure message      â”‚
â”‚  - Update payment history            â”‚
â”‚  - Refresh metrics                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

### Vercel + Supabase Production Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PRODUCTION DEPLOYMENT                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Repository      â”‚
â”‚   â”œâ”€ main branch         â”‚
â”‚   â”œâ”€ Auto-deploy on pushâ”‚
â”‚   â””â”€ Branch previews     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Git Push
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VERCEL PLATFORM                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  ğŸ“¦ Build Process                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. npm install && cd client && npm install --include=dev     â”‚ â”‚
â”‚  â”‚ 2. cd client && ./node_modules/.bin/vite build               â”‚ â”‚
â”‚  â”‚ 3. Output: client/dist/                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ğŸŒ Edge Network (CDN)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Static Assets (React SPA)                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ /index.html                                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ /assets/*.js (bundled)                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ /assets/*.css (bundled)                                  â”‚ â”‚
â”‚  â”‚  â””â”€ /novo-favicon.svg                                        â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Rewrites:                                                     â”‚ â”‚
â”‚  â”‚  /api/v1/* â†’ /api/index.js (serverless function)             â”‚ â”‚
â”‚  â”‚  /* â†’ /index.html (SPA routing)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  âš¡ Serverless Functions                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ /api/index.js (Express app wrapper)                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ Cold start: ~500ms (first request)                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ Warm: <50ms                                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ Auto-scaling                                             â”‚ â”‚
â”‚  â”‚  â””â”€ Region: US East 1                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ğŸ” Environment Variables                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ VITE_SUPABASE_URL         (Frontend)                         â”‚ â”‚
â”‚  â”‚ VITE_SUPABASE_ANON_KEY    (Frontend)                         â”‚ â”‚
â”‚  â”‚ SUPABASE_URL              (Backend)                          â”‚ â”‚
â”‚  â”‚ SUPABASE_ANON_KEY         (Backend)                          â”‚ â”‚
â”‚  â”‚ SUPABASE_SERVICE_KEY      (Backend)                          â”‚ â”‚
â”‚  â”‚ PORT                       (Auto-configured)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ğŸ“Š Analytics & Monitoring                                         â”‚
â”‚  â”œâ”€ Deployment logs                                               â”‚
â”‚  â”œâ”€ Function invocation metrics                                   â”‚
â”‚  â”œâ”€ Build time tracking                                           â”‚
â”‚  â””â”€ Error tracking                                                â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ PostgreSQL queries
                   â”‚ (SSL/TLS encrypted)
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SUPABASE PLATFORM                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  ğŸ—„ï¸  PostgreSQL Database                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Database: novo_retry_intelligence                            â”‚ â”‚
â”‚  â”‚ Version: PostgreSQL 15                                       â”‚ â”‚
â”‚  â”‚ Region: US East                                              â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Tables:                                                       â”‚ â”‚
â”‚  â”‚  â””â”€ transactions                                             â”‚ â”‚
â”‚  â”‚     â”œâ”€ id (UUID, PK, auto-generated)                         â”‚ â”‚
â”‚  â”‚     â”œâ”€ transaction_id (VARCHAR, indexed)                     â”‚ â”‚
â”‚  â”‚     â”œâ”€ merchant_id (VARCHAR)                                 â”‚ â”‚
â”‚  â”‚     â”œâ”€ customer_name (VARCHAR)                               â”‚ â”‚
â”‚  â”‚     â”œâ”€ amount (NUMERIC)                                      â”‚ â”‚
â”‚  â”‚     â”œâ”€ currency (VARCHAR)                                    â”‚ â”‚
â”‚  â”‚     â”œâ”€ processor (VARCHAR)                                   â”‚ â”‚
â”‚  â”‚     â”œâ”€ card_last_four (VARCHAR)                              â”‚ â”‚
â”‚  â”‚     â”œâ”€ status (VARCHAR)                                      â”‚ â”‚
â”‚  â”‚     â”œâ”€ failure_type (VARCHAR)                                â”‚ â”‚
â”‚  â”‚     â”œâ”€ failure_reason (TEXT)                                 â”‚ â”‚
â”‚  â”‚     â”œâ”€ attempt_number (INTEGER)                              â”‚ â”‚
â”‚  â”‚     â”œâ”€ timestamp (TIMESTAMPTZ)                               â”‚ â”‚
â”‚  â”‚     â”œâ”€ created_at (TIMESTAMPTZ, auto)                        â”‚ â”‚
â”‚  â”‚     â””â”€ updated_at (TIMESTAMPTZ, auto)                        â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Row-Level Security: ENABLED                                  â”‚ â”‚
â”‚  â”‚ Automatic Backups: Daily                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ğŸ” Authentication & Security                                      â”‚
â”‚  â”œâ”€ Anon key (public, read/write)                                 â”‚
â”‚  â”œâ”€ Service key (private, admin)                                  â”‚
â”‚  â””â”€ JWT-based auth                                                â”‚
â”‚                                                                    â”‚
â”‚  ğŸ“Š Dashboard & Monitoring                                         â”‚
â”‚  â”œâ”€ Query performance                                             â”‚
â”‚  â”œâ”€ Database size metrics                                         â”‚
â”‚  â”œâ”€ Connection pool stats                                         â”‚
â”‚  â””â”€ Error logs                                                    â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRODUCTION URL: https://novo-retry-intelligence.vercel.app
```

---

## Technology Decisions & Rationale

| Technology | Why We Chose It | Alternatives Considered |
|------------|----------------|------------------------|
| **React** | Component reusability, large ecosystem, TypeScript support | Vue.js (smaller), Svelte (newer) |
| **TypeScript** | Type safety, better IDE support, catch errors early | Plain JavaScript (less safe) |
| **Vite** | Fast dev server, optimized builds, modern tooling | Create React App (slower), Webpack (complex) |
| **TailwindCSS** | Utility-first, rapid prototyping, small bundle | Styled Components (CSS-in-JS), Bootstrap (opinionated) |
| **Express.js** | Lightweight, familiar, extensive middleware | Fastify (faster), Hapi (more opinionated) |
| **Supabase** | PostgreSQL-based, real-time, free tier, easy setup | Firebase (NoSQL), MongoDB Atlas (NoSQL), Raw PostgreSQL (more setup) |
| **Vercel** | Zero-config, auto-deploy from Git, global CDN, serverless | Netlify (similar), Railway (containerized), AWS (complex) |
| **Jest** | Industry standard, good React support, snapshot testing | Vitest (Vite-native), Mocha (older) |
| **Joi** | Schema validation, clear error messages, widely used | Yup (similar), Zod (TypeScript-first) |

---

## Performance Characteristics

| Metric | Target | Current (Production) | Measurement |
|--------|--------|---------------------|-------------|
| **Frontend Bundle Size** | <500 KB | ~380 KB (gzipped) | Vite build output |
| **API Response Time (p50)** | <50ms | ~30ms | Vercel analytics |
| **API Response Time (p95)** | <100ms | ~75ms | Vercel analytics |
| **Database Query Time** | <20ms | ~15ms | Supabase dashboard |
| **Cold Start Time** | <1s | ~500ms | Vercel function logs |
| **Page Load (FCP)** | <1.5s | ~1.2s | Lighthouse |
| **Page Load (LCP)** | <2.5s | ~2.0s | Lighthouse |
| **TTI (Time to Interactive)** | <3s | ~2.5s | Lighthouse |

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY LAYERS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ”’ Network Security                                             â”‚
â”‚  â”œâ”€ HTTPS/TLS 1.3 (all connections)                             â”‚
â”‚  â”œâ”€ Vercel Edge Network (DDoS protection)                       â”‚
â”‚  â””â”€ CORS (configured origins)                                   â”‚
â”‚                                                                  â”‚
â”‚  ğŸ›¡ï¸  Application Security                                        â”‚
â”‚  â”œâ”€ Helmet.js security headers                                  â”‚
â”‚  â”‚  â”œâ”€ X-Content-Type-Options: nosniff                          â”‚
â”‚  â”‚  â”œâ”€ X-Frame-Options: DENY                                    â”‚
â”‚  â”‚  â”œâ”€ X-XSS-Protection: 1; mode=block                          â”‚
â”‚  â”‚  â””â”€ Strict-Transport-Security: max-age=31536000              â”‚
â”‚  â”œâ”€ Rate limiting (100 req/min per IP)                          â”‚
â”‚  â””â”€ Input validation (Joi schemas)                              â”‚
â”‚                                                                  â”‚
â”‚  ğŸ” Data Security                                                â”‚
â”‚  â”œâ”€ PCI-DSS Compliance                                          â”‚
â”‚  â”‚  â”œâ”€ No full card numbers stored                              â”‚
â”‚  â”‚  â”œâ”€ Only last 4 digits logged                                â”‚
â”‚  â”‚  â””â”€ Complete audit trail                                     â”‚
â”‚  â”œâ”€ Environment variables (secrets)                             â”‚
â”‚  â””â”€ Row-Level Security (Supabase)                               â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“ Audit & Compliance                                           â”‚
â”‚  â”œâ”€ All retry decisions logged                                  â”‚
â”‚  â”œâ”€ Timestamps for all operations                               â”‚
â”‚  â”œâ”€ No PII in logs                                              â”‚
â”‚  â””â”€ Structured logging format                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Future Architecture Considerations (V2+)

### Planned Enhancements

```
V2 Architecture Additions:
â”œâ”€ Redis for distributed rate limiting
â”œâ”€ Message queue (RabbitMQ/Kafka) for async retries
â”œâ”€ Trained ML model (TensorFlow.js or Python microservice)
â”œâ”€ Real-time webhooks for retry events
â”œâ”€ GraphQL API for flexible querying
â””â”€ Advanced monitoring (Datadog, Sentry)

V3 Architecture:
â”œâ”€ Multi-region deployment
â”œâ”€ Event-driven architecture
â”œâ”€ Microservices separation
â”œâ”€ Container orchestration (Kubernetes)
â””â”€ Advanced analytics pipeline
```

---

**Document Version:** 1.0
**Last Updated:** January 2025
**Maintained By:** Novo Engineering Team
